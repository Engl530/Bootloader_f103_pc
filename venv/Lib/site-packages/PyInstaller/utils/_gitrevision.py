#
# The content of this file will be filled in with meaningful data
# when creating an archive using `git archive` or by downloading an
# archive from github, e.g. from github.com/.../archive/develop.zip
#
rev = "47568475ac"     # abbreviated commit hash
commit = "47568475acd72608b13ffc379341e5af78bb253c"  # commit hash
date = "2021-05-21 15:47:47 +0100"   # commit date
author = "Rok Mandeljc <rok.mandeljc@gmail.com>"
ref_names = "HEAD -> develop"  # incl. current branch
commit_message = """Disable splash screen on macOS and document lack of support for it

It turns out that Tcl/Tk on macOS (or rather, the underlying UI
toolkit) disallows UI operations from any thread other than
the main one. This makes the current splash screen implementation,
which operates in a secondary thread, inherently incompatible with
macOS.

The frozen application with splash screen enabled crashes when
calling Tk_Init() in the splash screen thread:
```
2021-05-13 19:37:02.116 program[3394:49760] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'NSWindow drag regions should only be invalidated on the Main Thread!'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff205f45bf __exceptionPreprocess + 242
    1   libobjc.A.dylib                     0x00007fff2032cbbb objc_exception_throw + 48
    2   CoreFoundation                      0x00007fff2061cdae -[NSException raise] + 9
    3   AppKit                              0x00007fff22cc9872 -[NSWindow(NSWindow_Theme) _postWindowNeedsToResetDragMarginsUnlessPostingDisabled] + 321
    4   AppKit                              0x00007fff22cb444a -[NSWindow _initContent:styleMask:backing:defer:contentView:] + 1296
    5   AppKit                              0x00007fff22cb3f33 -[NSWindow initWithContentRect:styleMask:backing:defer:] + 42
    6   libtk8.6.dylib                      0x0000000107ff3e61 TkMacOSXMakeRealWindowExist + 757
    7   libtk8.6.dylib                      0x0000000107ff3a3e TkWmMapWindow + 63
    8   libtk8.6.dylib                      0x0000000107f587ec Tk_MapWindow + 158
    9   libtk8.6.dylib                      0x0000000107f611f7 MapFrame + 59
    10  libtcl8.6.dylib                     0x0000000107e5a6d8 TclServiceIdle + 75
    11  libtcl8.6.dylib                     0x0000000107e3efd0 Tcl_DoOneEvent + 340
    12  libtk8.6.dylib                      0x0000000107fe6944 TkpInit + 766
    13  libtk8.6.dylib                      0x0000000107f59a37 Initialize + 2411
    14  program                             0x0000000106f87f31 program + 20273
    15  libsystem_pthread.dylib             0x00007fff20481954 _pthread_start + 224
    16  libsystem_pthread.dylib             0x00007fff2047d4a7 thread_start + 15
)
libc++abi: terminating with uncaught exception of type NSException
Abort trap: 6
```

Therefore, explicitly disable building with splash screen on macOS
by raising SystemExit in Splash constructor, following the same
behavior as if tkinter is missing. Also add/adjust notes about
lack of macOS support throughout the docs.
"""
